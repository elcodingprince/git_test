Doing with while at CAPS 